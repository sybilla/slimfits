/**
  @license
  Apache License 2.0 https://github.com/ReactiveX/RxJS/blob/master/LICENSE.txt
 **/
(function(M){"object"===typeof exports&&"undefined"!==typeof module?module.exports=M():"function"===typeof define&&define.amd?define([],M):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).slimfits=M()})(function(){return function e(l,k,g){function c(a,d){if(!k[a]){if(!l[a]){var h="function"==typeof require&&require;if(!d&&h)return h(a,!0);if(p)return p(a,!0);h=Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h;}h=k[a]={exports:{}};
l[a][0].call(h.exports,function(f){var d=l[a][1][f];return c(d?d:f)},h,h.exports,e,l,k,g)}return k[a].exports}for(var p="function"==typeof require&&require,b=0;b<g.length;b++)c(g[b]);return c}({1:[function(e,l,k){var g=e("./Interfaces"),c=e("./utils/KeywordsManager"),p=e("./utils/PromiseUtils"),b=e("./RegisteredDataReaders");e=function(){function a(){}a.readFitsAsync=function(d){var h=[],f=0;return p.PromiseUtils.promiseWhile(function(){return f<d.getByteLength()},function(){return a.readHduAsync(d,
f).then(function(a){h.push(a);f+=a.bytesRead})}).then(function(){return h})};a.readHeaderAsync=function(a,h){var f=!1,m=[],b=0;return p.PromiseUtils.promiseWhile(function(){return!f},function(){return a.getStringAsync(h+b,g.Constants.blockLength).then(function(a){b+=g.Constants.blockLength;for(var d=0;d<g.Constants.maxKeywordsInBlock;d++){var h=a.substring(d*g.Constants.lineLength,(d+1)*g.Constants.lineLength);if(f=c.Keyword.isLastLine(h))break;m.push(c.KeywordsManager.parseKeyword(h))}return null})}).then(function(){return{header:m,
bytesRead:b}})};a.readHduAsync=function(d,h){var f={header:null,data:null,bytesRead:0};return a.readHeaderAsync(d,h).then(function(m){var b=c.KeywordsManager.getValue(m.header,"NAXIS",0);f.header=m.header;f.bytesRead+=m.bytesRead;return 0!==b?a.readDataAsync(d,h+m.bytesRead,m.header):null}).then(function(d){f.data=d;f.bytesRead+=a.readDataSize(f.header);return f})};a.readDataAsync=function(a,h,f){var m=b.RegisteredDataReaders.filter(function(a){return a.canReadData(f)});if(1!==m.length)console.error("SlimFits was unable to read this file.");
else return m[0].readDataAsync(a,h,f)};a.readDataSize=function(a){var h=b.RegisteredDataReaders.filter(function(f){return f.canReadData(a)});if(1!==h.length)console.error("SlimFits was unable to read this file.");else return h[0].readDataSize(a)};return a}();k.FitsReader=e},{"./Interfaces":2,"./RegisteredDataReaders":3,"./utils/KeywordsManager":16,"./utils/PromiseUtils":17}],2:[function(e,l,k){k.Constants={blockLength:2880,lineLength:80,keyLength:8,maxKeywordsInBlock:36};(function(c){c[c.Byte=8]=
"Byte";c[c.Char=8]="Char";c[c.Short=16]="Short";c[c.Integer=32]="Integer";c[c.Long=64]="Long";c[c.Float=-32]="Float";c[c.Double=-64]="Double";c[c.Unknown=0]="Unknown"})(k.BitPix||(k.BitPix={}));var g=k.BitPix;e=function(){function c(){}c.getByteSize=function(c){return Math.abs(c)/8};c.getBitPixForLetter=function(c){switch(c){case "A":return g.Byte;case "B":return g.Byte;case "I":return g.Short;case "J":return g.Integer;case "K":return g.Long;case "E":return g.Float;case "D":return g.Double;default:throw"unrecognized format";
}};return c}();k.BitPixUtils=e},{}],3:[function(e,l,k){l=e("./datareaders/SimpleDataReader");var g=e("./datareaders/AsciiTableDataReader"),c=e("./datareaders/BinaryTableDataReader"),p=e("./datareaders/RandomGroupsDataReader");e=e("./datareaders/CompressedImageReader");k.RegisteredDataReaders=[new l.SimpleDataReader,new g.AsciiTableDataReader,new c.BinaryTableDataReader,new p.RandomGroupsDataReader,new e.CompressedImageReader]},{"./datareaders/AsciiTableDataReader":4,"./datareaders/BinaryTableDataReader":5,
"./datareaders/CompressedImageReader":6,"./datareaders/RandomGroupsDataReader":7,"./datareaders/SimpleDataReader":8}],4:[function(e,l,k){var g=e("../Interfaces"),c=e("../utils/KeywordsManager"),p=e("../utils/AsciiConverter");e=function(){function b(){}b.prototype.canReadData=function(a){return c.KeywordsManager.hasValue(a,"XTENSION","TABLE")};b.prototype.readDataSize=function(a){var d=c.KeywordsManager.getValue(a,"NAXIS2",1);a=c.KeywordsManager.getValue(a,"NAXIS1",1);return Math.ceil(a*d/g.Constants.blockLength)*
g.Constants.blockLength};b.prototype.readDataAsync=function(a,d,h){var f=c.KeywordsManager.getValue(h,"NAXIS2",1),m=c.KeywordsManager.getValue(h,"NAXIS1",1),b=c.KeywordsManager.getValue(h,"TFIELDS",0),g=h.filter(function(a){return 0===a.key.indexOf("TFORM")}).map(function(a){return p.AsciiConverter.getConverterFor(a.value,f)}),e=g.map(function(a){return a.converter}),n=g.map(function(a){return a.array}),k=h.filter(function(a){return 0===a.key.indexOf("TBCOL")}).map(function(a){return a.value-1}).concat([m]);
if(k.length+1!==b)throw"There are "+k.length+" 'TBCOL#' keywords whereas 'TFIELDS' specifies "+b;return a.getStringAsync(d,m*f).then(function(a){for(var d=0;d<f;d++)for(var h=a.substr(d*m,m),c=0;c<b;c++){var g=h.substr(k[c],k[c+1]-k[c]);n[c][d]=e[c](g.trim())}return n})};return b}();k.AsciiTableDataReader=e},{"../Interfaces":2,"../utils/AsciiConverter":14,"../utils/KeywordsManager":16}],5:[function(e,l,k){var g=e("../Interfaces"),c=e("../utils/KeywordsManager"),p=e("../utils/ArrayUtils");e=function(){function b(){}
b.prototype.canReadData=function(a){return c.KeywordsManager.hasValueFromList(a,"XTENSION",["BINTABLE","A3DTABLE"])&&!c.KeywordsManager.hasValue(a,"ZIMAGE",!0)};b.prototype.readDataSize=function(a){var d=c.KeywordsManager.getValue(a,"NAXIS2",1);a=c.KeywordsManager.getValue(a,"NAXIS1",1);return Math.ceil(a*d/g.Constants.blockLength)*g.Constants.blockLength};b.prototype.readColumn=function(a,d,h,f,b,c){if(0==b)return[];var e="A"==c?g.BitPix.Byte:g.BitPixUtils.getBitPixForLetter(c),k=new ArrayBuffer(g.BitPixUtils.getByteSize(e)*
d*b);p.ArrayUtils.pluckColumn(a,k,d,h,f,b,e,!0);a=p.ArrayUtils.chunk(k,e,b);return"A"==c?a.map(function(a){return String.fromCharCode.apply(null,a)}):a};b.prototype.readDataAsync=function(a,d,h){var f=this,b=c.KeywordsManager.getValue(h,"NAXIS2",0),e=c.KeywordsManager.getValue(h,"NAXIS1",0),p=0,k=/\d+\w/,n=h.filter(function(a){return 0===a.key.indexOf("TFORM")&&k.test(a.value)}).map(function(a){var f=a.value.substr(a.value.length-1,1);a=parseInt(a.value.substr(0,a.value.length-1));var d=p,h="A"==
f?g.BitPix.Byte:g.BitPixUtils.getBitPixForLetter(f);p+=a*g.BitPixUtils.getByteSize(h);return{format:f,count:a,byteOffset:d}});return a.getDataAsync(d,b*e,g.BitPix.Byte).then(function(a){return n.map(function(d){return f.readColumn(a.buffer,b,e,d.byteOffset,d.count,d.format)})})};return b}();k.BinaryTableDataReader=e},{"../Interfaces":2,"../utils/ArrayUtils":13,"../utils/KeywordsManager":16}],6:[function(e,l,k){var g=e("../Interfaces"),c=e("../utils/KeywordsManager"),p=e("../utils/Rice"),b=e("es6-promise");
e=function(){function a(){}a.prototype.canReadData=function(a){return c.KeywordsManager.hasValueFromList(a,"XTENSION",["BINTABLE","A3DTABLE"])&&c.KeywordsManager.hasValue(a,"ZIMAGE",!0)};a.prototype.readDataSize=function(a){var h=c.KeywordsManager.getValue(a,"PCOUNT",0);a=c.KeywordsManager.getValue(a,"NAXIS2",0);var f=g.BitPixUtils.getByteSize(g.BitPix.Integer);return Math.ceil((h+2*a*f)/g.Constants.blockLength)*g.Constants.blockLength};a.convertToTiles=function(a,h){for(var f=[],b=a.length/2,c=0;c<
b;c++)f.push(new Uint8Array(h.buffer,a[2*c+1],a[2*c]));return f};a.riceExtract=function(a,h,f){return a};a.prototype.readDataAsync=function(d,h,f){var m=c.KeywordsManager.getValue(f,"NAXIS2",0);c.KeywordsManager.getValue(f,"NAXIS1",0);c.KeywordsManager.getValue(f,"TFIELDS",0);var e=/([01]{0,1})([PQ])([ABIJKED])\((\d+)\)/;c.KeywordsManager.getValue(f,"THEAP",0);var q=c.KeywordsManager.getValue(f,"PCOUNT",0);c.KeywordsManager.getValue(f,"GCOUNT",0);var k=c.KeywordsManager.getValue(f,"ZCMPTYPE","");
if(f.filter(function(a){return 0==a.key.indexOf("TFORM")}).some(function(a){return e.test(a.value)})){var n=f.filter(function(a){return 0==a.key.indexOf("TFORM")&&e.test(a.value)})[0],n=e.exec(n.value),l=n[2],D=n[3];parseInt(n[4]);if("P"!==l)throw"Pointer format other than Int32 unsupported";if("B"!==D)throw"Element format other than Byte currently unsupported";if("RICE_1"!==k)throw"Decompression other than Rice is not currently supported";var x=f.filter(function(a){return 0==a.key.indexOf("ZTILE")&&
"ZTILE"!==a.key}).reduce(function(a,f){return a*f.value},1),E=c.KeywordsManager.getValue(f,"ZVAL1",32),u=c.KeywordsManager.getValue(f,"ZVAL2",4);c.KeywordsManager.getValue(f,"ZBITPIX",g.BitPix.Unknown);k=g.BitPixUtils.getByteSize(g.BitPix.Integer);m*=2;k*=m;d=[d.getDataAsync(h,m,g.BitPix.Integer),d.getDataAsync(h+k,q,g.BitPix.Byte)];return b.Promise.all(d).then(function(d){d=a.convertToTiles(d[0],d[1]);var h=[],b=E/8*x,m=new ArrayBuffer(b*d.length),e=c.KeywordsManager.getValue(f,"BSCALE",1),w=c.KeywordsManager.getValue(f,
"BZERO",0);u==g.BitPixUtils.getByteSize(g.BitPix.Integer)?h=d.map(function(a,f){var d=new Int32Array(m,f*b,x);p.Rice.fits_rdecomp(a,d,E);for(var h=a.length;h--;)d[h]=e*d[h]+w;return d}):u==g.BitPixUtils.getByteSize(g.BitPix.Short)?h=d.map(function(a,f){var d=new Int16Array(m,f*b,x);p.Rice.fits_rdecomp_short(a,d,E);for(var h=a.length;h--;)d[h]=e*d[h]+w;return d}):u==g.BitPixUtils.getByteSize(g.BitPix.Byte)&&(h=d.map(function(a,f){var d=new Uint8Array(m,f*b,x);p.Rice.fits_rdecomp_byte(a,d,E);for(var h=
a.length;h--;)d[h]=e*d[h]+w;return d}));return h})}throw"Compressed image should have one variable column.";};return a}();k.CompressedImageReader=e},{"../Interfaces":2,"../utils/KeywordsManager":16,"../utils/Rice":18,"es6-promise":20}],7:[function(e,l,k){var g=e("../Interfaces"),c=e("../utils/KeywordsManager"),p=e("../utils/ArrayUtils");e=function(){function b(){}b.prototype.canReadData=function(a){return c.KeywordsManager.hasValue(a,"GROUPS",!0)&&c.KeywordsManager.hasValue(a,"NAXIS1",0)};b.prototype.readDataSize=
function(a){var d=c.KeywordsManager.getValue(a,"BITPIX",g.BitPix.Unknown),h=a.filter(function(a){return 0===a.key.indexOf("NAXIS")&&"NAXIS"!==a.key&&"NAXIS1"!==a.key&&1!==a.value}).reduce(function(a,d){return a*d.value},1),f=c.KeywordsManager.getValue(a,"GCOUNT",0);a=c.KeywordsManager.getValue(a,"PCOUNT",0);d=g.BitPixUtils.getByteSize(d);return Math.ceil(f*(a+h)*d/g.Constants.blockLength)*g.Constants.blockLength};b.prototype.readDataAsync=function(a,d,h,f){void 0===f&&(f=!0);var b=c.KeywordsManager.getValue(h,
"BITPIX",g.BitPix.Unknown),e=g.BitPixUtils.getByteSize(b),k=c.KeywordsManager.getValue(h,"GCOUNT",0),l=c.KeywordsManager.getValue(h,"PCOUNT",0),n=h.filter(function(a){return 0===a.key.indexOf("NAXIS")&&"NAXIS"!==a.key&&"NAXIS1"!==a.key&&1!==a.value}).reduce(function(a,d){return a*d.value},1),I=l+n,D=l*e;return a.getDataAsync(d,I*k,b,f).then(function(a){var d=p.ArrayUtils.generateTypedArray(b,k*l),f=p.ArrayUtils.generateTypedArray(b,k*n);p.ArrayUtils.pluckColumn(a.buffer,d.buffer,k,I*e,0,l,b,!1);p.ArrayUtils.pluckColumn(a.buffer,
f.buffer,k,I*e,D,n,b,!1);return{params:p.ArrayUtils.chunk(d.buffer,b,l),data:p.ArrayUtils.chunk(f.buffer,b,n)}})};return b}();k.RandomGroupsDataReader=e},{"../Interfaces":2,"../utils/ArrayUtils":13,"../utils/KeywordsManager":16}],8:[function(e,l,k){var g=e("../Interfaces"),c=e("../utils/KeywordsManager"),p=e("es6-promise");e=function(){function b(){}b.prototype.canReadData=function(a){return(c.KeywordsManager.hasValue(a,"SIMPLE",!0)||c.KeywordsManager.hasValue(a,"XTENSION","IMAGE"))&&!c.KeywordsManager.hasValue(a,
"GROUPS",!0)};b.prototype.readDataSize=function(a){var d=c.KeywordsManager.getValue(a,"BITPIX",g.BitPix.Unknown),d=g.BitPixUtils.getByteSize(d);if(c.KeywordsManager.hasValue(a,"NAXIS",0))return 0;a=a.filter(function(a){return 0===a.key.indexOf("NAXIS")&&"NAXIS"!==a.key}).reduce(function(a,d){return a*d.value},1);return Math.ceil(d*a/g.Constants.blockLength)*g.Constants.blockLength};b.prototype.readDataAsync=function(a,d,h,f){void 0===f&&(f=!0);var b=c.KeywordsManager.getValue(h,"BITPIX",g.BitPix.Unknown),
e=h.filter(function(a){return 0===a.key.indexOf("NAXIS",0)&&"NAXIS"!==a.key}),k=e.map(function(a){return a.value}).reduce(function(a,d){return a*d},1),l=c.KeywordsManager.getValue(h,"BSCALE",1),n=c.KeywordsManager.getValue(h,"BZERO",0);return 0<e.length&&0!==k?(a=a.getDataAsync(d,k,b,f),1!==l||0!==n?a.then(function(a){for(var d=0;d<a.length;d++)a[d]=a[d]*l+n;return a}):a):p.Promise.resolve(null)};return b}();k.SimpleDataReader=e},{"../Interfaces":2,"../utils/KeywordsManager":16,"es6-promise":20}],
9:[function(e,l,k){var g=e("../Interfaces"),c=e("../utils/ArrayUtils"),p=e("es6-promise");e=function(){function b(a){this.file=a;this.url="";this.url=a.name}b.prototype.initialize=function(){return p.Promise.resolve(!0)};b.prototype.getByteLength=function(){return this.file.size};b.prototype.getStringAsync=function(a,d){var h=this;return new p.Promise(function(f,b){var c=h.file.slice(a,a+d),g=new FileReader;g.onloadend=function(a){a=a.target;a.readyState==a.DONE?f(a.result):b(a.error)};g.readAsText(c)})};
b.prototype.getDataAsync=function(a,d,h,f){var b=this;void 0===f&&(f=!0);return new p.Promise(function(e,p){var k=b.file.slice(a,a+d*g.BitPixUtils.getByteSize(h)),n=new FileReader;n.onloadend=function(b){b=b.target;if(b.readyState==b.DONE){var g=c.ArrayUtils.generateTypedArray(h,d);c.ArrayUtils.copy(b.result,g.buffer,a,d,h,f);e(g)}else p(b.error)};n.readAsArrayBuffer(k)})};return b}();k.BlobFile=e},{"../Interfaces":2,"../utils/ArrayUtils":13,"es6-promise":20}],10:[function(e,l,k){var g=e("../utils/Header"),
c=e("../utils/PromiseUtils"),p=e("../utils/ArrayUtils");e=function(){function b(a){this.url=a;this.size=0}b.parseHeaders=function(a){return a?a.split("\r\n").filter(function(a){return""!==a||""!==a.trim()}).map(function(a){var b=a.indexOf(": ");return 0<b?new g.Header(a.substring(0,b),a.substring(b+2)):null}):[]};b.prototype.initialize=function(){var a=this;return c.PromiseUtils.getRequestAsync(this.url,"HEAD","text").then(function(d){d=b.parseHeaders(d.getAllResponseHeaders());if(d.some(function(a){return"Accept-Ranges"==
a.name&&"bytes"==a.value}))return d=d.filter(function(a){return"Content-Length"==a.name}),a.size=parseInt(d[0].value),null;throw"File does not support Ranges request keyword";})};b.prototype.getByteLength=function(){return this.size};b.prototype.getStringAsync=function(a,d){var b=[new g.AcceptRangeHeader(a,d)];return c.PromiseUtils.getRequestAsync(this.url,"GET","text",b).then(function(a){return a.responseText})};b.prototype.getDataAsync=function(a,d,b,f){void 0===f&&(f=!0);var e=p.ArrayUtils.generateTypedArray(b,
d);a=[new g.AcceptRangeHeader(a,e.BYTES_PER_ELEMENT*d)];return c.PromiseUtils.getRequestAsync(this.url,"GET","arraybuffer",a).then(function(a){p.ArrayUtils.copy(a.response,e.buffer,0,d,b,f);return e})};return b}();k.MultipleRequestFile=e},{"../utils/ArrayUtils":13,"../utils/Header":15,"../utils/PromiseUtils":17}],11:[function(e,l,k){var g=e("../utils/PromiseUtils"),c=e("../utils/ArrayUtils"),p=e("es6-promise");e=function(){function b(a){this.url=a;this.data=null}b.prototype.initialize=function(){var a=
this;return g.PromiseUtils.getRequestAsync(this.url).then(function(d){a.data=d.response;return a.data})};b.prototype.getByteLength=function(){return null!=this.data?this.data.byteLength:0};b.prototype.getStringAsync=function(a,d){return p.Promise.resolve(String.fromCharCode.apply(null,new Uint8Array(this.data,a,d)))};b.prototype.getDataAsync=function(a,d,b,f){void 0===f&&(f=!0);var g=c.ArrayUtils.generateTypedArray(b,d);c.ArrayUtils.copy(this.data,g.buffer,a,d,b,f);return p.Promise.resolve(g)};return b}();
k.SingleRequestFile=e},{"../utils/ArrayUtils":13,"../utils/PromiseUtils":17,"es6-promise":20}],12:[function(e,l,k){l=e("./FitsReader");k.FitsReader=l.FitsReader;l=e("./datasource/BlobFile");k.BlobFile=l.BlobFile;l=e("./datasource/MultipleRequestFile");k.MultipleRequestFile=l.MultipleRequestFile;e=e("./datasource/SingleRequestFile");k.SingleRequestFile=e.SingleRequestFile},{"./FitsReader":1,"./datasource/BlobFile":9,"./datasource/MultipleRequestFile":10,"./datasource/SingleRequestFile":11}],13:[function(e,
l,k){var g=e("../Interfaces");e=function(){function c(){}c.copy=function(c,b,a,d,h,f){void 0===f&&(f=!0);if(0==d)throw"Length of copied array cannot be 0";if(h==g.BitPix.Unknown)throw"Unknown array element type";b=[new Uint8Array(c),new Uint8Array(b)];c=b[0];b=b[1];h=g.BitPixUtils.getByteSize(h);var e=d*h;if(f&&1!==h)for(f=0;f<d;f++)for(e=0;e<h;e++)b[h*f+e]=c[a+h*f+(h-(e+1))];else for(f=0;f<e;f++)b[f]=c[a+f]};c.generateTypedArray=function(c,b){if(0==b)throw"Length of created array cannot be 0";switch(c){case g.BitPix.Byte:return new Uint8Array(b);
case g.BitPix.Short:return new Int16Array(b);case g.BitPix.Integer:return new Int32Array(b);case g.BitPix.Float:return new Float32Array(b);case g.BitPix.Double:return new Float64Array(b);default:throw"Cannot create array of unknown type";}};c.pluckColumn=function(c,b,a,d,h,f,e,k){b=[new Uint8Array(c),new Uint8Array(b)];c=b[0];b=b[1];e=g.BitPixUtils.getByteSize(e);if(k&&1!==e)for(k=0;k<a;k++)for(var l=0;l<f;l++)for(var r=0;r<e;r++)b[k*f*e+l*e+r]=c[k*d+h+l*e+(e-(r+1))];else for(k=0;k<a;k++)for(l=0;l<
f;l++)for(r=0;r<e;r++)b[k*f*e+l*e+r]=c[k*d+h+l*e+r]};c.chunk=function(c,b,a){var d=g.BitPixUtils.getByteSize(b)*a,h=c.byteLength/d,f=[];switch(b){case g.BitPix.Byte:for(b=0;b<h;b++)f.push(new Uint8Array(c,b*d,a));return f;case g.BitPix.Short:for(b=0;b<h;b++)f.push(new Int16Array(c,b*d,a));return f;case g.BitPix.Integer:for(b=0;b<h;b++)f.push(new Int32Array(c,b*d,a));return f;case g.BitPix.Float:for(b=0;b<h;b++)f.push(new Float32Array(c,b*d,a));return f;case g.BitPix.Double:for(b=0;b<h;b++)f.push(new Float64Array(c,
b*d,a));return f;default:throw"Cannot create array of unknown type";}};return c}();k.ArrayUtils=e},{"../Interfaces":2}],14:[function(e,l,k){var g=function(){function c(){}c.test=function(c,b){return(new RegExp(c)).test(b)};c.String="A\\d{1,}";c.Integer="I\\d{1,}";c.Float="F\\d{1,}\\.?\\d{0,}";c.Double="(D|E)\\d{1,}\\.?\\d{0,}";return c}();e=function(){function c(){}c.getConverterFor=function(c,b){if(g.test(g.String,c))return{converter:function(a){return a},array:Array(b)};if(g.test(g.Integer,c))return{converter:function(a){return""===
a?0:parseInt(a)},array:new Int32Array(b)};if(g.test(g.Float,c))return{converter:function(a){return""===a?0:parseFloat(a)},array:new Float32Array(b)};if(g.test(g.Double,c))return{converter:function(a){return""===a?0:parseFloat(a)},array:new Float64Array(b)};throw"AsciiConvertManager: No converter registered for "+c;};return c}();k.AsciiConverter=e},{}],15:[function(e,l,k){var g=this&&this.__extends||function(c,e){function b(){this.constructor=c}for(var a in e)e.hasOwnProperty(a)&&(c[a]=e[a]);c.prototype=
null===e?Object.create(e):(b.prototype=e.prototype,new b)};e=function(){return function(c,e){this.name=c;this.value=e}}();k.Header=e;e=function(c){function e(b,a){c.call(this,"Range","bytes="+b+"-"+(b+a-1));this.from=b;this.length=a}g(e,c);return e}(e);k.AcceptRangeHeader=e},{}],16:[function(e,l,k){var g=e("./ValueConverters"),c=e("../Interfaces"),p=function(){function b(a,d,b){void 0===d&&(d=null);void 0===b&&(b=null);this.key=a;this.value=d;this.comment=b}b.isLastLine=function(a){return 0===a.indexOf("END     ",
0)};return b}();k.Keyword=p;e=function(){function b(){}b.getConverterByName=function(a){if(a in g.ValueConverters.registeredNames)return g.ValueConverters.registeredNames[a];var d=Object.keys(g.ValueConverters.registeredPrefixedNames).filter(function(d){return 0===a.indexOf(d)});return 0<d.length?g.ValueConverters.registeredPrefixedNames[d[0]]:g.ValueConverters.defaultConverter};b.isInt=function(a){return"number"===typeof a&&parseFloat(a.toString())===parseInt(a.toString(),10)&&!isNaN(a)};b.getConverterByType=
function(a){return a in g.ValueConverters.registeredTypes?g.ValueConverters.registeredTypes[a]:g.ValueConverters.defaultConverter};b.single=function(a,d){return a.filter(function(a){return a.key==d})[0]};b.getValue=function(a,d,b){a=a.filter(function(a){return a.key==d});return 0==a.length?b:a[0].value};b.hasValue=function(a,d,b){return a.some(function(a){return a.key==d&&a.value==b})};b.hasValueFromList=function(a,d,b){return a.some(function(a){return a.key==d&&-1<b.indexOf(a.value)})};b.convert=
function(a){var d=typeof a;"number"===d&&(d=b.isInt(a)?"int":"float");"object"===d&&a.getMonth&&(d="date");return b.getConverterByType(d)};b.convertBack=function(a,d){return b.getConverterByName(d).convertBack(a)};b.parseKeyword=function(a){var d=new p(a.substring(0,c.Constants.keyLength).trim());if("= "===a.substr(c.Constants.keyLength,2))if("/"===a.charAt(31))d.value=b.convertBack(a.substr(10,21).trim(),d.key),d.comment=a.substr(32).trim();else{a=a.substr(10,c.Constants.lineLength-10);var e=a.lastIndexOf(" /");
-1===e?d.value=b.convertBack(a.trim(),d.key):(d.value=b.convertBack(a.substring(0,e).trim(),d.key),d.comment=a.substring(e+1).trim())}else a=a.substr(c.Constants.keyLength,c.Constants.lineLength-c.Constants.keyLength),d.value=b.convertBack(a,d.key);return d};return b}();k.KeywordsManager=e},{"../Interfaces":2,"./ValueConverters":19}],17:[function(e,l,k){var g=e("es6-promise");e=function(){function c(){}c.getRequestAsync=function(c,b,a,d){void 0===b&&(b="GET");void 0===a&&(a="arraybuffer");void 0===
d&&(d=[]);return new g.Promise(function(e,f){var g=new XMLHttpRequest;g.open(b,c);g.responseType=a;d.forEach(function(a){g.setRequestHeader(a.name,a.value)});g.onload=function(){200<=this.status&&300>this.status?e(g):f({status:this.status,statusText:g.statusText})};g.onerror=function(){f({status:this.status,statusText:g.statusText})};g.send()})};c.promiseWhile=function(c,b){return new g.Promise(function(a,d){var e=function(){if(c())return(new g.Promise(function(a,d){try{a(b())}catch(c){d(c)}})).then(e)["catch"](function(a){return d(a)});
a(void 0);return null};setTimeout(e,30)})};return c}();k.PromiseUtils=e},{"es6-promise":20}],18:[function(e,l,k){e=function(){function e(){}e.getNonzeroCount=function(){for(var c=new Uint8Array(256),e=1,b=1;8>=b;b++)for(var a=0;a<Math.pow(2,b-1);a++)c[e++]=b;return c};e.fits_rdecomp=function(c,k,b){for(var a=e.getNonzeroCount(),d=0,h=(new DataView(c.buffer)).getInt32(0,!1),d=d+4,f=c[d++],m=8,l=0;l<k.length;){for(m-=5;0>m;)f=f<<8|c[d++],m+=8;var q=(f>>m)-1,f=f&(1<<m)-1,r=l+b;r>k.length&&(r=k.length);
if(0>q)for(;l<r;l++)k[l]=h;else if(25==q)for(;l<r;l++){for(var q=32-m,n=f<<q,q=q-8;0<=q;q-=8)f=c[d++],n|=f<<q;0<m?(f=c[d++],n|=f>>-q,f&=(1<<m)-1):f=0;n=0==(n&1)?n>>1:~(n>>1);k[l]=n+h;h=k[l]}else for(;l<r;l++){for(;0==f;)m+=8,f=c[d++];n=m-a[f];m-=n+1;f^=1<<m;for(m-=q;0>m;)f=f<<8|c[d++],m+=8;n=n<<q|f>>m;f&=(1<<m)-1;n=0==(n&1)?n>>1:~(n>>1);k[l]=n+h;h=k[l]}}};e.fits_rdecomp_short=function(c,k,b){for(var a=e.getNonzeroCount(),d=0,h=(new DataView(c.buffer)).getInt16(0,!1),d=d+2,f=c[d++],m=8,l=0;l<k.length;){for(m-=
4;0>m;)f=f<<8|c[d++],m+=8;var q=(f>>m)-1,f=f&(1<<m)-1,r=l+b;r>k.length&&(r=k.length);if(0>q)for(;l<r;l++)k[l]=h;else if(14==q)for(;l<r;l++){for(var q=16-m,n=f<<q,q=q-8;0<=q;q-=8)f=c[d++],n|=f<<q;0<m?(f=c[d++],n|=f>>-q,f&=(1<<m)-1):f=0;n=0==(n&1)?n>>1:~(n>>1);k[l]=n+h;h=k[l]}else for(;l<r;l++){for(;0==f;)m+=8,f=c[d++];n=m-a[f];m-=n+1;f^=1<<m;for(m-=q;0>m;)f=f<<8|c[d++],m+=8;n=n<<q|f>>m;f&=(1<<m)-1;n=0==(n&1)?n>>1:~(n>>1);k[l]=n+h;h=k[l]}}};e.fits_rdecomp_byte=function(c,k,b){var a=e.getNonzeroCount(),
d,h=c[0];d=1;for(var f=c[d++],m=8,l=0;l<k.length;){for(m-=3;0>m;)f=f<<8|c[d++],m+=8;var q=(f>>m)-1,f=f&(1<<m)-1,r=l+b;r>k.length&&(r=k.length);if(0>q)for(;l<r;l++)k[l]=h;else if(6==q)for(;l<r;l++){for(var q=8-m,n=f<<q,q=q-8;0<=q;q-=8)f=c[d++],n|=f<<q;0<m?(f=c[d++],n|=f>>-q,f&=(1<<m)-1):f=0;n=0==(n&1)?n>>1:~(n>>1);k[l]=n+h;h=k[l]}else for(;l<r;l++){for(;0==f;)m+=8,f=c[d++];n=m-a[f];m-=n+1;f^=1<<m;for(m-=q;0>m;)f=f<<8|c[d++],m+=8;n=n<<q|f>>m;f&=(1<<m)-1;n=0==(n&1)?n>>1:~(n>>1);k[l]=n+h;h=k[l]}}};return e}();
k.Rice=e},{}],19:[function(e,l,k){e=function(){function a(){}a.prototype.convert=function(a){return a.replace(/\'/g,"''")};a.prototype.convertBack=function(a){"'"===a.charAt(0)&&(a=a.substr(1));"'"===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1));return a.replace(/\'\'/g,"'").toString().trim()};return a}();k.StringConverter=e;l=function(){function a(){}a.prototype.convert=function(a){return a.toString()};a.prototype.convertBack=function(a){return parseInt(a)};return a}();k.IntConverter=l;var g=
function(){function a(){}a.prototype.convert=function(a){return a.toString()};a.prototype.convertBack=function(a){return parseFloat(a)};return a}();k.FloatConverter=g;var c=function(){function a(){}a.prototype.convert=function(a){console.warn("DateFitsValueConverter.convert not implemented.");return""};a.prototype.convertBack=function(a){"'"===a[0]&&(a=a.slice(1));"'"===a[a.length-1]&&(a=a.slice(0,a.length-1));return isNaN(Date.parse(a))?(console.error("DateFitsValueConverter.convertBack error parsing "+
a),null):new Date(a)};return a}();k.DateConverter=c;var p=function(){function a(){}a.prototype.convert=function(a){return a?"T":"F"};a.prototype.convertBack=function(a){return"T"===a.toString().trim().toUpperCase()};return a}();k.BooleanConverter=p;var b=function(){function a(){}a.prototype.convert=function(a){return a.toString()};a.prototype.convertBack=function(a){return parseInt(a)};return a}();k.BitPixConverter=b;var b={ZBITPIX:new b,BITPIX:new b,NAXIS:new l,NAXIS1:new l,NAXIS2:new l,NAXIS3:new l,
YBINNING:new l,XBINNING:new l,PCOUNT:new l,GCOUNT:new l,NSEGMENT:new l,BSCALE:new g,BZERO:new g,EPOCH:new e,EQUINOX:new g,ALTRVAL:new g,ALTRPIX:new g,RESTFREQ:new g,DATAMAX:new g,DATAMIN:new g,RA:new g,DEC:new g,OBSRA:new g,OBSDEC:new g,XSHIFT:new g,YSHIFT:new g,SIMPLE:new p,GROUPS:new p,BLOCKED:new p,EXTEND:new p,SEQVALID:new p,TFIELDS:new l,ZIMAGE:new p,ZVAL1:new l,ZVAL2:new l},a={NAXIS:new l,NSEG:new l,CRVAL:new g,CDELT:new g,CRPIX:new g,CROTA:new g,PHAS:new g,PSCAL:new g,PZERO:new g,SDLT:new g,
SRVL:new g,SRPX:new g,DBJD:new g,"THDA-":new g};l={"int":new l,"float":new g,string:new e,date:new c,"boolean":new p};k.ValueConverters={registeredNames:b,registeredPrefixedNames:a,registeredTypes:l,defaultConverter:new e}},{}],20:[function(e,l,k){(function(g,c){(function(){function k(){return function(){g.nextTick(f)}}function b(){return function(){U(f)}}function a(){var a=0,b=new V(f),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function d(){var a=
new MessageChannel;a.port1.onmessage=f;return function(){a.port2.postMessage(0)}}function h(){return function(){setTimeout(f,1)}}function f(){for(var a=0;a<y;a+=2)(0,G[a])(G[a+1]),G[a]=void 0,G[a+1]=void 0;y=0}function m(){try{var a=e("vertx");U=a.runOnLoop||a.runOnContext;return b()}catch(c){return h()}}function w(){}function q(a){try{return a.then}catch(b){return L.error=b,L}}function r(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function n(a,b,c){z(function(a){var d=!1,e=r(c,b,function(c){d||
(d=!0,b!==c?x(a,c):u(a,c))},function(b){d||(d=!0,t(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,t(a,e))},a)}function I(a,b){b._state===H?u(a,b._result):b._state===A?t(a,b._result):K(b,void 0,function(b){x(a,b)},function(b){t(a,b)})}function D(a,b,c){b.constructor===a.constructor&&c===O&&constructor.resolve===P?I(a,b):c===L?t(a,L.error):void 0===c?u(a,b):"function"===typeof c?n(a,b,c):u(a,b)}function x(a,b){a===b?t(a,new TypeError("You cannot resolve a promise with itself")):"function"===
typeof b||"object"===typeof b&&null!==b?D(a,b,q(b)):u(a,b)}function E(a){a._onerror&&a._onerror(a._result);N(a)}function u(a,b){a._state===B&&(a._result=b,a._state=H,0!==a._subscribers.length&&z(N,a))}function t(a,b){a._state===B&&(a._state=A,a._result=b,z(E,a))}function K(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null;e[f]=b;e[f+H]=c;e[f+A]=d;0===f&&a._state&&z(N,a)}function N(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],
d?T(c,d,e,f):e(f);a._subscribers.length=0}}function S(){this.error=null}function T(a,b,c,d){var e="function"===typeof c,f,g,h,k;if(e){try{f=c(d)}catch(l){Q.error=l,f=Q}f===Q?(k=!0,g=f.error,f=null):h=!0;if(b===f){t(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,h=!0;b._state===B&&(e&&h?x(b,f):k?t(b,g):a===H?u(b,f):a===A&&t(b,f))}function X(a,b){try{b(function(b){x(a,b)},function(b){t(a,b)})}catch(c){t(a,c)}}function v(a){this._id=Z++;this._result=this._state=
void 0;this._subscribers=[];if(w!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof v)X(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}function F(a,b){this._instanceConstructor=a;this.promise=new a(w);Array.isArray(b)?(this._input=b,this._remaining=this.length=b.length,this._result=Array(this.length),
0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&u(this.promise,this._result))):t(this.promise,this._validationError())}var Y=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},y=0,U,R,z=function(a,b){G[y]=a;G[y+1]=b;y+=2;2===y&&(R?R(f):W())},J="undefined"!==typeof window?window:void 0,C=J||{},V=C.MutationObserver||C.WebKitMutationObserver,C="undefined"!==typeof g&&"[object process]"===
{}.toString.call(g),aa="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,G=Array(1E3),W;W=C?k():V?a():aa?d():void 0===J&&"function"===typeof e?m():h();var O=function(a,b){var c=this._state;if(c===H&&!a||c===A&&!b)return this;var d=new this.constructor(w),e=this._result;if(c){var f=arguments[c-1];z(function(){T(c,d,f,e)})}else K(this,d,a,b);return d},P=function(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(w);
x(b,a);return b},B=void 0,H=1,A=2,L=new S,Q=new S,Z=0;v.all=function(a){return(new ba(this,a)).promise};v.race=function(a){function b(a){x(d,a)}function c(a){t(d,a)}var d=new this(w);if(!Y(a))return t(d,new TypeError("You must pass an array to race.")),d;for(var e=a.length,f=0;d._state===B&&f<e;f++)K(this.resolve(a[f]),void 0,b,c);return d};v.resolve=P;v.reject=function(a){var b=new this(w);t(b,a);return b};v._setScheduler=function(a){R=a};v._setAsap=function(a){z=a};v._asap=z;v.prototype={constructor:v,
then:O,"catch":function(a){return this.then(null,a)}};var ba=F;F.prototype._validationError=function(){return Error("Array Methods must be provided an Array")};F.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===B&&c<a;c++)this._eachEntry(b[c],c)};F.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;d===P?(d=q(a),d===O&&a._state!==B?this._settledAt(a._state,b,a._result):"function"!==typeof d?(this._remaining--,this._result[b]=a):c===
v?(c=new c(w),D(c,a,d),this._willSettleAt(c,b)):this._willSettleAt(new c(function(b){b(a)}),b)):this._willSettleAt(d(a),b)};F.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===B&&(this._remaining--,a===A?t(d,c):this._result[b]=c);0===this._remaining&&u(d,this._result)};F.prototype._willSettleAt=function(a,b){var c=this;K(a,void 0,function(a){c._settledAt(H,b,a)},function(a){c._settledAt(A,b,a)})};J=function(){var a;if("undefined"!==typeof c)a=c;else if("undefined"!==typeof self)a=
self;else try{a=Function("return this")()}catch(b){throw Error("polyfill failed because global object is unavailable in this environment");}var d=a.Promise;if(!d||"[object Promise]"!==Object.prototype.toString.call(d.resolve())||d.cast)a.Promise=v};C={Promise:v,polyfill:J};"undefined"!==typeof l&&l.exports?l.exports=C:"undefined"!==typeof this&&(this.ES6Promise=C);J()}).call(this)}).call(this,e("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{_process:21}],21:[function(e,l,k){function g(){d=!1;h.length?a=h.concat(a):f=-1;a.length&&c()}function c(){if(!d){var b=setTimeout(g);d=!0;for(var c=a.length;c;){h=a;for(a=[];++f<c;)h&&h[f].run();f=-1;c=a.length}h=null;d=!1;clearTimeout(b)}}function p(a,b){this.fun=a;this.array=b}function b(){}e=l.exports={};var a=[],d=!1,h,f=-1;e.nextTick=function(b){var f=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)f[e-1]=arguments[e];a.push(new p(b,f));1!==a.length||
d||setTimeout(c,0)};p.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=!0;e.env={};e.argv=[];e.version="";e.versions={};e.on=b;e.addListener=b;e.once=b;e.off=b;e.removeListener=b;e.removeAllListeners=b;e.emit=b;e.binding=function(a){throw Error("process.binding is not supported");};e.cwd=function(){return"/"};e.chdir=function(a){throw Error("process.chdir is not supported");};e.umask=function(){return 0}},{}]},{},[12])(12)});

